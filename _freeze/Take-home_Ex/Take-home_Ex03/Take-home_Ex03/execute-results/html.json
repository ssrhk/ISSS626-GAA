{
  "hash": "e58ab76b8c833679dedd98da0aa67e79",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take Home Exercise 3: Modelling Geography of Financial Inclusion in Tanzania with Geographically Weighted Methods \"\nauthor: \"Sei Sar Hla Kyi\"\ndate: \"14 October 2024\"\ndate-modified: \"2024-10-22\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  freeze: true\n  warning: false\n---\n\n\n# 1 Overview\n\n## 1.1 Background\n\nFinancial inclusion plays a key role in promoting equitable economic growth by enabling individuals and businesses to access essential financial services such as banking, loans, insurance, and equity products. In Tanzania, financial inclusion initiatives have become a priority in addressing the needs of underserved populations, particularly those in rural or economically disadvantaged areas. These initiatives aim to improve household incomes, reduce income inequality, and foster inclusive economic participation by providing timely and affordable access to financial products and services(United Nations Capital Development Fund \\[UNCDF\\], 2024).\n\nDespite significant progress in financial inclusion efforts, access to financial services is uneven across different geographical regions within Tanzania. Rural areas, particularly in districts with low levels of economic activity, often face greater challenges in accessing financial services compared to more urbanized districts. These spatial disparities raise important questions about the factors driving financial inclusion at the district level and how regional policies can be designed to promote more inclusive economic outcomes.\n\n## 1.2 Objectives\n\nThis analysis aims to build an explanatory model using Geographically Weighted Regression (GWR) to identify the key factors affecting financial inclusion across districts in Tanzania. By focusing on multiple socio-economic and infrastructural variables, this study will provide insights into how these factors vary geographically and influence financial access at a district level.\n\nSpecifically, the objectives are:\n\n-   **Identify Key Determinants**: Determine the primary socio-economic and infrastructural factors that influence financial inclusion, such as income levels, education, proximity to financial institutions, and mobile money adoption.\n\n-   **Examine Regional Variation**: Explore how the effects of these factors vary across different districts, providing a localized understanding of financial inclusion.\n\n## 1.3 Defining Financial Inclusion\n\nFinancial inclusion refers to the process of ensuring that individuals and businesses have access to useful and affordable financial products and services that meet their needs such as transactions, payments, savings, credit, and insurance. According to the World Bank, financial inclusion is a \"key enabler in reducing poverty and boosting shared prosperity by providing the unbanked and underserved populations access to essential financial services\" (World Bank, 2023).\n\nA well-functioning financial inclusion system enables individuals to manage risks, invest in education, and build sustainable livelihoods. In the context of Tanzania, financial inclusion is particularly vital for rural populations, where access to traditional banking infrastructure is limited, and reliance on informal financial services can hinder economic opportunities. The development of digital financial services, such as mobile money, has significantly expanded financial inclusion in Sub-Saharan Africa, enabling millions to access financial services without needing to visit a physical bank (World Bank Group, 2024).\n\nWhile progress has been made, the uneven distribution of financial services and the varying levels of inclusion between rural and urban areas highlight the need to explore the determinants of financial inclusion at a local level. Identifying these factors is crucial for improving access to financial services and promoting inclusive economic development.\n\n------------------------------------------------------------------------\n\n# 2 Methodology\n\nThe explanatory model will be developed using Geographically Weighted Regression (GWR), which is a spatial extension of multiple linear regression that allows for localized variations in the relationships between predictors and the response variableâ€”in this case, financial inclusion.\n\nThe process will follow these steps:\n\n-   **Variable Selection**: Identify key predictor variables from the FinScope dataset, such as income levels, education, proximity to financial institutions, population density, and mobile money adoption. These will serve as explanatory variables in the model.\n\n-   **Model Building**: Build the explanatory model using multiple linear regression techniques, enhanced by GWR to account for geographical variations. This will allow us to evaluate the influence of each predictor on financial inclusion across different districts.\n\n-   **Model Calibration and Validation**: Calibrate the GWR model to ensure that it effectively captures the localized relationships between financial inclusion and its determinants. The model will be validated by examining the accuracy and goodness-of-fit metrics.\n\n-   **Spatial Visualization**: Mapping the results of the GWR model to visualize how the effects of each factor vary geographically, will highlight districts where specific variables have a stronger or weaker influence on financial inclusion.\n\n------------------------------------------------------------------------\n\n# 3 Loading R Packages\n\n::: panel-tabset\n## Packages Used\n\nThe following packages were used for this study:\n\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| Package     | Description                                                                                                   |\n+=============+===============================================================================================================+\n| olsrr       | For creating and evaluating ordinary least squares regression models.                                         |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| ggstatsplot | for producing statistical visualizations that combine ggplot2 graphics with statistical results               |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| ggpubr      | To create publication-ready visualizations with ggplot2 and arranging multiple plots                          |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| sf          | For importing, managing, and handling geospatial data                                                         |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| sfdep       | To analyze spatial relationships and incorporate them into regression models                                  |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| spdep       | For calculating spatial weights and conducting tests for spatial relationships                                |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| GWmodel     | To explore spatially varying relationships between the dependent and independent variables                    |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| tmap        | For thematic mapping, allowing us to visualize spatial data in an intuitive and aesthetically pleasing manner |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| tidyverse   | For data manipulation, cleaning, and visualization                                                            |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| gtsummary   | To create summary tables for regression results, providing a clear and concise presentation of model outputs  |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| see         | For visualizing model diagnostics and results                                                                 |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| performance | For evaluating model performance and diagnostics                                                              |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n| datawizard  | To handle missing values, recode variables, and perform exploratory data analysis before modeling             |\n+-------------+---------------------------------------------------------------------------------------------------------------+\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(olsrr, ggstatsplot, ggpubr, sf, spdep, sfdep, GWmodel, tmap, tidyverse, gtsummary,see,performance,datawizard)\n```\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n# 4 Data Preparation\n\n## 4.1 The Datasets\n\nFor this analysis, we will use two primary datasets: (1) FinScope Tanzania 2023, which provides district-level data on financial inclusion, and (2) district-level boundary GIS data from the geoBoundaries portal to facilitate spatial analysis.\n\n-   **FinScope Tanzania 2023**: This dataset include comprehensive district-level data on access to financial services, covering indicators such as banking services, mobile money usage, savings, loans, and insurance. The dataset will be used to identify the key factors affecting financial inclusion and to develop the explanatory model.\n\n-   **District Boundary GIS Data**: Geographic boundary data for the districts of Tanzania, sourced from the geoBoundaries, will enable us to link the financial inclusion data to specific geographic locations for spatial analysis using GWR.\n\n## 4.2 Import the Data\n\n### 4.2.1 Aspatial Data\n\nThe *FinScope* *Tanzania* dataset from 2023, was imported by using *read_csv()* package.\n\nThen, the data was prepared for analysis with the following steps:\n\n-   Remove columns with all missing/NA values.\n-   Then we select the columns with the variables chosen which will be explained in the Variable Selection section.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania <- read_csv(\"data/rawdata/FinScope_Tanzania.csv\")%>%\n  select(5,9,11,13:14,16,61,65:67,71,95:96,98:103,107:119,124:125,140,142:151,160:174,177:178,188,183:192,196,215:223,\n         276:278,294:306,344:353,361:372,374:378,395:397,455:460,507:529,574:588,680:685,697:698,700:716,718) %>%\n  select(where(~ !all(is.na(.))))\n```\n:::\n\n\nWe will use ***glimpse()*** to quickly check the attributes.\n\nLastly, we will save the prepared dataframe into rds format.\n\n::: panel-tabset\n## Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(tanzania, \"data/rds/tanzania.rds\")\n```\n:::\n\n\n## Load\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania <- read_rds(\"data/rds/tanzania.rds\")\n```\n:::\n\n:::\n\n### 4.2.2 Geospatial Data - Study Area\n\nThe *geo Boundaries of Tanzania* dataset, was imported by using *st_read()* package.\n\nThe dataset was prepared for analysis with the following steps:\n\n-   We note that Tanzania is in WGS 84/ UTM Zone 37S. We will use st_transform to reproject coordinate reference system to EPSG: 32737 for Tanzania.\n\n-   To perform left join with the aspatial dataset, we need a common column - districts. Therefore, we need to change the variable, shapeName, to 'dist_name' to make it a common variable with the FinScope Tanzania dataset.\n\n-   To ensure the districts are common, some districts will be renamed from \"Arusha Urban\" to \"Arusha\" as the same way it was displayed in FinScope Tanzania dataset. Since the FinScope Tanzania dataset already have a variable that classifies if the surveyee is residing in an urban or rural area, we do not need to have a separate district with the title Urban as it falls under the same district.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzbounds <- st_read(dsn = \"data/rawdata/\", \n                      layer = \"geoBoundaries-TZA-ADM2\",\n                      crs=4326) %>%\n  st_transform(crs=32737) %>%\n  rename(dist_name = shapeName) %>%\n  mutate(dist_name = ifelse(dist_name == \"Arusha Urban\", \"Arusha\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Meru\", \"Arumeru\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Iringa Urban\",\"Iringa\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Bukoba Urban\", \"Bukoba\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Mpanda Urban\", \"Mpanda\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Kigoma  Urban\", \"Kigoma\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Moshi Urban\", \"Moshi\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Lindi Urban\", \"Lindi\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Musoma Urban\", \"Musoma\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Mbeya Urban\", \"Mbeya\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Babati UrbanBabati Urban\", \"Babati\", dist_name)) %>%\n  mutate(dist_name = ifelse(dist_name == \"Dodoma Urban\", \"Dodoma\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Kibaha Urban\", \"Kibaha\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Morogoro Urban\", \"Morogoro\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Mtwara Urban\", \"Mtwara\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Njombe Urban\", \"Njombe \", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Mtwara Urban\", \"Mtwara\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Shinyanga Urban\", \"Shinyanga\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Singida Urban\", \"Singida\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Songea Urban\", \"Songea\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Sumbawanga Urban\", \"Sumbawanga\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Tabora Urban\", \"Tabora\", dist_name))%>%\n  mutate(dist_name = ifelse(dist_name == \"Tanga Urban\", \"Tanga\", dist_name))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `geoBoundaries-TZA-ADM2' from data source \n  `/Users/seesarhlakyi/Desktop/ssrhk/ISSS626-GAA/Take-home_Ex/Take-home_Ex03/data/rawdata' \n  using driver `ESRI Shapefile'\nSimple feature collection with 170 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 29.58953 ymin: -11.76235 xmax: 40.44473 ymax: -0.983143\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nst_crs(tanzbounds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCoordinate Reference System:\n  User input: EPSG:32737 \n  wkt:\nPROJCRS[\"WGS 84 / UTM zone 37S\",\n    BASEGEOGCRS[\"WGS 84\",\n        ENSEMBLE[\"World Geodetic System 1984 ensemble\",\n            MEMBER[\"World Geodetic System 1984 (Transit)\"],\n            MEMBER[\"World Geodetic System 1984 (G730)\"],\n            MEMBER[\"World Geodetic System 1984 (G873)\"],\n            MEMBER[\"World Geodetic System 1984 (G1150)\"],\n            MEMBER[\"World Geodetic System 1984 (G1674)\"],\n            MEMBER[\"World Geodetic System 1984 (G1762)\"],\n            MEMBER[\"World Geodetic System 1984 (G2139)\"],\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ENSEMBLEACCURACY[2.0]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4326]],\n    CONVERSION[\"UTM zone 37S\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",39,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",10000000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Between 36Â°E and 42Â°E, southern hemisphere between 80Â°S and equator, onshore and offshore. Kenya. Mozambique. Tanzania.\"],\n        BBOX[-80,36,0,42]],\n    ID[\"EPSG\",32737]]\n```\n\n\n:::\n:::\n\n\n::: panel-tabset\n## Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(tanzbounds, \"data/rds/tanzbounds.rds\")\n```\n:::\n\n\n## Load\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzbounds<- read_rds(\"data/rds/tanzbounds.rds\")\n```\n:::\n\n:::\n\n### 4.2.3 Left Join\n\nNext, we will create a tourism economy indicators layer by left joining the geospatial dataframe (tanzbound) to the attribute dataframe (tanzania) by using ***left_join()***.\n\n::: callout-note\n## To perform a left_join(), we must ensure that there is a common column between the two. For our case, the common column is 'dist_name'\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_fin <- left_join(tanzbounds,tanzania)\n```\n:::\n\n\n::: panel-tabset\n## Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(tanzania_fin, \"data/rds/tanzania_fin.rds\")\n```\n:::\n\n\n## Load\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_fin<- read_rds(\"data/rds/tanzania_fin.rds\")\n```\n:::\n\n:::\n\n# 5 Variable Selection\n\nIn the development of a robust multiple linear regression model, the selection of appropriate variables is critical to ensuring the model's accuracy and interpretability. This section focuses on the identification and selection of both nominal and continuous variables that will serve as predictors in our regression analysis.\n\nInitially, we will establish a preliminary set of variables based on theoretical foundations and previous empirical research. Nominal variables will encompass categorical factors that may influence financial behaviors, such as the type of financial institution, demographic characteristics, and access to financial services. Continuous variables will include measurable factors like amount borrowed, and age which can provide insight into the financial landscape of the respondents.\n\nOnce we have constructed our initial model using these variables, we will conduct a comprehensive model assessment to evaluate its performance. This will involve calculating the Variance Inflation Factor (VIF) to assess multicollinearity among the independent variables. High VIF values indicate potential redundancy among variables, which can compromise the model's reliability. Consequently, we will refine our variable selection by identifying and retaining only those variables that significantly contribute to explaining the variance in our dependent variable, financial inclusion.\n\n## 5.1 Continuous Variables\n\nThe following are the continuous variables selected.\n\n+----------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| **Variable**                           | **Justification for Selection**                                                                                                                                                                                                                                                                                                                                                                                 |\n+========================================+=================================================================================================================================================================================================================================================================================================================================================================================================================+\n| Age                                    | Age is a critical demographic variable that often influences various socio-economic outcomes. It can affect financial behaviors, access to resources, and the types of assistance individuals might require.Research indicates that younger individuals may be more inclined to take risks and invest in education or business ventures, while older individuals might focus on savings and retirement planning |\n+----------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Amount received from Government or NGO | The amount received from government programs or NGOs is a key indicator of financial support and social safety nets available to individuals and households. This variable is particularly relevant in understanding the economic vulnerability of respondents and their reliance on external assistance.Â                                                                                                       |\n+----------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Amount the respondent owe              | Understanding the debt levels within a population helps identify financial risks and vulnerabilities, enabling policymakers to design interventions that address excessive indebtedness and promote financial literacy and management skills.                                                                                                                                                                   |\n+----------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\nBefore we prepare our variables, we will convert the column names into a more R-friendly format usingÂ `make.names()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(tanzania_fin) <- make.names(colnames(tanzania_fin))\n```\n:::\n\n\nFor these three variables, we will prepare the data in the following steps:\n\n-   Rename the variable as AmountOwe and replace \"Can't remember\" and \"Refused\" with \"0\"\n\n-   Convert AmountOwe to numeric\n\n-   Rename the last variable as MoneyReceivedfromGovt\n\n-   Replace NA values for both variables with 0\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_fin <- tanzania_fin %>%\n  mutate(\n    `G.2.6..Approximately.how.much.money.do.you.owe..in.TZS` = \n      gsub(\"Can't remember|Refused\", \"0\", \n           `G.2.6..Approximately.how.much.money.do.you.owe..in.TZS`, \n           ignore.case = TRUE), \n    AmountOwe = as.numeric(`G.2.6..Approximately.how.much.money.do.you.owe..in.TZS`) \n  )%>%\n  rename(MoneyReceivedfromGovt = `X3.The.last.time.you.received.money..how.much.money.did.you.receive..in.TZS`) %>%\n  mutate(\n    MoneyReceivedfromGovt = ifelse(is.na(MoneyReceivedfromGovt), 0, MoneyReceivedfromGovt),\n    AmountOwe = ifelse(is.na(AmountOwe), 0, AmountOwe)\n  )\n```\n:::\n\n\n## 5.2 Nominal Variables\n\nn our analysis, we will employ one-hot encoding to transform these nominal variables into a format suitable for regression modeling. One-hot encoding allows us to create binary columns for each category, enabling the regression model to assess the impact of each nominal variable effectively. This approach ensures that we capture the distinct effects of categorical factors on the dependent variable while maintaining the integrity of the data.\n\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| **Variable**                                                                                                                                                         | **Justification for Selection**                                                    | **Modification**                                                                                                                                                                                         |\n+======================================================================================================================================================================+====================================================================================+==========================================================================================================================================================================================================+\n| dist_name                                                                                                                                                            | To see the impact of residing in different districts                               | All districts are encoded to different variables starting withÂ `dist_`. For instance, if a respondent is from Babati, the variableÂ `dist_Babati`Â will be 1 for that respondent and 0 for all the others. |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Cluster type                                                                                                                                                         | To understand if there are any inequality across urban and rural areas             | Encoded as two columns - 'Urban' and 'Rural'                                                                                                                                                             |\n|                                                                                                                                                                      |                                                                                    |                                                                                                                                                                                                          |\n|                                                                                                                                                                      |                                                                                    | If respondent indicates 'urban', this variable will be 1 and 0 for rural.                                                                                                                                |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Who is the head of this household                                                                                                                                    | To understand the demographic background of respondent                             | Encoded as two columns - 'HHH' for head of household and 'NotHHH' for not head of household                                                                                                              |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Respondent gender                                                                                                                                                    | To understand the demographic background of respondent                             | Encoded as two columns - 'male' and 'female'                                                                                                                                                             |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Education Background                                                                                                                                                 | To understand the demographic background of respondent                             | Encoded as eight columns - 'NoFormalEducation' and 'SomePrimary' and so on                                                                                                                               |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Access to Mobile Phone, Internet and Laptop                                                                                                                          | To understand the socioeconomic status of respondent                               | Encoded as three columns - 'MobilePhone', 'Internet' and 'Laptop'                                                                                                                                        |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Own a Mobile Phone                                                                                                                                                   | To understand the socioeconomic status of respondent                               | Encoded as two columns - 'MobileYes' and 'MobileNo'                                                                                                                                                      |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| If Business is registered with government                                                                                                                            | To understand business compliance                                                  | Encoded as two columns - 'BusinessRegistered_Yes' and 'BusinessRegistered_No'                                                                                                                            |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Respondent's main income source                                                                                                                                      | To understand the socioeconomic status of respondent                               | Encoded as binary columns for each income type, such as Formal_sector_salaried, Traders_agriculatural_proudcts, etc.                                                                                     |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Who they discuss their financial matters with                                                                                                                        | To understand social support networks                                              | Encoded as 15 columns - 'Advice_HouseholdMember' and 'Advice_Bank' and so on.                                                                                                                            |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| What they did when they could not meet spending needs                                                                                                                | To understand coping mechanisms                                                    | Encoded as 10 columns - 'UsedSavings' and 'BorrowedFromBank'                                                                                                                                             |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Whether respondent is comfortable with banks                                                                                                                         | To gauge trust in financial institutions                                           | Encoded as 'ComfortableWithBank_Yes' and 'ComfortableWithBank_No'                                                                                                                                        |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Financial Education                                                                                                                                                  | To understand the respondent's financial literacy                                  | Encoded as 'ReceivedFinancialEducation_Yes' and 'ReceivedFinancialEducation_No'                                                                                                                          |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Retirement plans                                                                                                                                                     | To understand future financial planning                                            | Encoded as 'Old_ChildrenWillTakeCareOfMe' and 'Old_Savings'                                                                                                                                              |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Confidence in financial institutions                                                                                                                                 | To understand perceptions of financial institutions                                | Encoded as \"ConfidentWithBanks\" and 'ConfidentWithPensionFund' and so on                                                                                                                                 |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| If they are paying back money they owe within a year                                                                                                                 | To understand debt management                                                      | Encoded as PayingBack_Yes and PayingBack_No.                                                                                                                                                             |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| If they have borrowed money from any financial institutions                                                                                                          | To understand access to credit                                                     | Encoded as binary columns for each financial institution type such as 'BorrowedFrom_Bank' and 'BorrowedFrom_MFI'                                                                                         |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| How often a respondent use the payment type for purchases                                                                                                            | To understand spending habits                                                      | Encoded as binary columns for each payment type such as Used_Cash, Used_ATM, Used_CreditCard and so on.                                                                                                  |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Assistance from Government or NGO and problems they face receiving assistance                                                                                        | To understand reliance on assistance and issues                                    | Encoded as binary columns such as 'Basic_TASAF_Cash_TransferÂ ' and 'Money_Didnt_Come'                                                                                                                    |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Reporting problems regarding financial matters                                                                                                                       | To understand barriers in reporting issues                                         | Encoded as binary columns such as 'Do_Not_Know_Where_To_Go' and 'Do_Not_Think_They_Care'                                                                                                                 |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Confidence and Trust in Insurance Companies                                                                                                                          | To assess trust in insurance                                                       | Encoded as relevant indicators such as Trust_Insurance_Companies                                                                                                                                         |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Insurance ownership and type of insurance                                                                                                                            | To understand financial protection                                                 | Encoded as binary columns for each insurance type such as Motor_vehicle_insurance, Health_Insurance, etc.                                                                                                |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| If they have any issues accessing financial products                                                                                                                 | To understand barriers to access                                                   | Network_Failure and Agent_Absent                                                                                                                                                                         |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Access and relationship with moneylender                                                                                                                             | To understand trust and access to informal credit                                  | Moneylender_Access and Moneylender_TreatsWell                                                                                                                                                            |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| If respondent is involved with a Bank, MFI, PENSION, INSURANCE, SACCO, CAPITAL Fund Managers, FORMAL INVESTMEN, CMG, INFORMAL MONEYLENDER or apart of a Social group | To assess engagement with financial institutions, microfinance, pension and so on. | Encoded as Banked and Not_Banked, MFI and Not_MFI and so on.                                                                                                                                             |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\nWe will use the following code chunk to one-hot encode all the nominal variables as mentioned above.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_encoded <- tanzania_fin %>%\n  mutate(districts = tanzania_fin$dist_name)%>%\n  mutate(dist_name = as.factor(dist_name)) %>%\n  mutate(value = 1) %>% \n  pivot_wider(names_from = dist_name, \n              values_from = value, \n              values_fill = 0, \n              names_prefix = \"dist_\") %>%\n  mutate(\n    Urban = ifelse(`Cluster.type` == \"Urban\", 1, 0),\n    Rural = ifelse(`Cluster.type` == \"Rural\", 1, 0)) %>%\n  mutate(\n    HHH = ifelse(`C2..Who.is.the.head.of.this.household.` == \"Respondent is hhh\", 1, 0), \n    NotHHH = ifelse(`C2..Who.is.the.head.of.this.household.` == \"Respondent not hhh\", 1, 0))%>%\n  mutate(\n    Male = ifelse(`C9..Respondent.gender.Interviewer.to.observe` == \"Male\", 1, 0), \n    Female = ifelse(`C9..Respondent.gender.Interviewer.to.observe` == \"Female\", 1, 0))%>% \n  mutate(\n    NoFormalEducation = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"No formal education\", 1, 0),\n    SomePrimary = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Some primary\", 1, 0),\n    PrimaryCompleted = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Primary completed\", 1, 0),\n    PostPrimaryTechnicalTraining = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Post primary technical training\", 1, 0),\n    SomeSecondary = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Some secondary\", 1, 0),\n    SecondaryCompleted_OLevel = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Secondary competed-O level\", 1, 0),\n    SomeUniversityOrHigherEducation = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"Some University or other higher education\", 1, 0),\n    UniversityOrHigherEducationCompleted = ifelse(`C11..Highest.level.of.education.completed..Can.read.out` == \"University or higher education completed\", 1, 0))%>%\n  mutate(\n    MobilePhone = ifelse(`C23..Which.of.the.following.do.you.have.access..to..Mobile.phone` == \"Yes\", 1, 0),\n    Internet = ifelse(`C23..Which.of.the.following.do.you.have.access..to..Internet` == \"Yes\", 1, 0),\n    Laptop = ifelse(`C23..Which.of.the.following.do.you.have.access..to..Laptop.or.desktop.or.tablet` == \"Yes\", 1, 0))%>%\n  mutate(\n    MobileYes = ifelse(`C24.1..Do.you.personally.own.a.mobile.phone.` == \"Yes\", 1, 0),\n    MobileNo = ifelse(`C24.1..Do.you.personally.own.a.mobile.phone.` == \"No\", 1, 0)\n  ) %>%\n  mutate(\n    BusinessRegistered_Yes = ifelse(`X6.4a.Is.your.business.registered.with.any.government.authority.` == \"Yes\", 1, 0),\n    BusinessRegistered_No = ifelse(`X6.4a.Is.your.business.registered.with.any.government.authority.` == \"No\", 1, 0)\n  ) %>%\n  mutate(\n    TriedButNot = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..Tried.but.was.not` == \"Yes\", 1, 0),\n    NoTime = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..Don.t.have.time` == \"Yes\", 1, 0),\n    NoMoney = ifelse(`X6.4c..Why.you.have.not.registered.this.business..Dont.have.money` == \"Yes\", 1, 0),\n    TooComplicated = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..It.is.too.complicated` == \"Yes\", 1, 0),\n    NoBenefit = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..No.benefit` == \"Yes\", 1, 0),\n    BusinessTooSmall = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..Business.is.too.small` == \"Yes\", 1, 0),\n    NoPayment = ifelse(`X6.4c..Why.you.have.not.registered.this.business..Don.t.want.to.pay` == \"Yes\", 1, 0),\n    DontKnowHow = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..Dontt.know.how` == \"Yes\", 1, 0),\n    RegistrationInProcess = ifelse(`X6.4c.Please.tell.me.why.you.have.not.registered.this.business..Registration.is.being.processed` == \"Yes\", 1, 0))%>%\n  mutate(\n    Formal_sector_salaried = ifelse(Main.Income.Source == \"Formal sector salaried\", 1, 0),\n    Informal_sector_salaried = ifelse(Main.Income.Source == \"Informal sector salaried\", 1, 0),\n    Farmers_and_fishers = ifelse(Main.Income.Source == \"Farmers and fishers\", 1, 0),\n    Traders_agricultural_products = ifelse(Main.Income.Source == \"Traders - agricultural products\", 1, 0),\n    Traders_non_agricultural = ifelse(Main.Income.Source == \"Traders - non-agricultural\", 1, 0),\n    Service_providers = ifelse(Main.Income.Source == \"Service providers\", 1, 0),\n    Piece_work_casual_labor = ifelse(Main.Income.Source == \"Piece work/casual labor\", 1, 0),\n    Rental_income = ifelse(Main.Income.Source == \"Rental income\", 1, 0),\n    Interest_from_savings_investments_stocks_unit_trusts = ifelse(Main.Income.Source == \"Interest from savings, investments, stocks, unit trusts etc.\", 1, 0),\n    Pension = ifelse(Main.Income.Source == \"Pension\", 1, 0),\n    Welfare = ifelse(Main.Income.Source == \"Welfare\", 1, 0),\n    Gambling = ifelse(Main.Income.Source == \"Gambling\", 1, 0),\n    Dependents = ifelse(Main.Income.Source == \"Dependents\", 1, 0),\n    Other = ifelse(Main.Income.Source == \"Other\", 1, 0)\n  )%>%\n  mutate(\n    Advice_HouseholdMember = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..A.household.member` == \"Yes\", 1, 0),\n    Advice_FamilyMember = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Another.family.member` == \"Yes\", 1, 0),\n    Advice_Employer = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Employer` == \"Yes\", 1, 0),\n    Advice_Bank = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Bank` == \"Yes\", 1, 0),\n    Advice_Microfinance = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Microfinance.institution` == \"Yes\", 1, 0),\n    Advice_SACCOS = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Savings.and.credit.cooperative..SACCOS.` == \"Yes\", 1, 0),\n    Advice_FinancialAdvisor = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Financial.advisor` == \"Yes\", 1, 0),\n    Advice_FarmersAssociation = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Farmers.association` == \"Yes\", 1, 0),\n    Advice_BusinessAssociation = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Business.association` == \"Yes\", 1, 0),\n    Advice_SavingsGroup = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Savings.group` == \"Yes\", 1, 0),\n    Advice_Moneylender = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Moneylender.in.community` == \"Yes\", 1, 0),\n    Advice_GovernmentOfficial = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Government.official` == \"Yes\", 1, 0),\n    Advice_VillageElder = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Village.elder.elder` == \"Yes\", 1, 0),\n    Advice_OtherSpecify = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..Other.specify` == \"Yes\", 1, 0),\n    Advice_NoOne = ifelse(`E.3.3..Who.do.you.talk.with.for.advice.about.money.matters..I.do.not.speak.with.anyone` == \"Yes\", 1, 0)\n  )%>%\n  mutate(\n    UsedSavings = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Used.savings` == \"Yes\", 1, 0),\n    BorrowedFromBank = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Borrowed.from.a.bank.MFI.SACCO` == \"Yes\", 1, 0),\n    BorrowedThroughMM = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Borrowed.money.through.MM` == \"Yes\", 1, 0),\n    BorrowedFromMoneyLender = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Borrowed.from.money.lender` == \"Yes\", 1, 0),\n    BorrowedFromFriendFamily = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Borrowed.from.friend.family.community` == \"Yes\", 1, 0),\n    GotAssistanceFromFamily = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Got.assistance.from.family.friends.community..that.I.did.not.need.to.repay.` == \"Yes\", 1, 0),\n    SoldLivestock = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Sold.livestock` == \"Yes\", 1, 0),\n    CutSpending = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Cut.spending` == \"Yes\", 1, 0),\n    WorkedMore = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Worked.more` == \"Yes\", 1, 0),\n    Others = ifelse(`E.7.N.1..Last.12.months...what.did.you.do.when.you.couldn.t.meet.your.regular.spending.needs._Others` == \"Yes\", 1, 0)\n  )%>%\n  mutate(\n    ComfortableWithBank_Yes = ifelse(`E.5.1..You.feel.comfortable.to.go.into.a.bank.or.another.financial.institution` == \"Yes\", 1, 0),\n    ComfortableWithBank_No = ifelse(`E.5.1..You.feel.comfortable.to.go.into.a.bank.or.another.financial.institution` == \"No\", 1, 0), ReceivedFinancialEducation_Yes = ifelse(`E.5.2..You.have.received.some.financial.education.in.your.life` == \"Yes\", 1, 0),\n    ReceivedFinancialEducation_No = ifelse(`E.5.2..You.have.received.some.financial.education.in.your.life` == \"No\", 1, 0),\n    Old_Savings = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Savings\", 1, 0),\n    Old_ChildrenWillTakeCareOfMe = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Children will take care of me\", 1, 0),\n    Old_MoneyFromFriendsRelatives = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Money from friends/relatives\", 1, 0),\n    Old_LandProperty = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Land/property\", 1, 0),\n    Old_OwnBusiness = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Own business\", 1, 0),\n    Old_RentalIncome = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Rental income\", 1, 0),\n    Old_DividendsFromShares = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Dividends from shares\", 1, 0),\n    Old_FarmingAgricultureLivestock = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Farming/agriculture/livestock\", 1, 0),\n    Old_Pension = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Pension\", 1, 0),\n    Old_InsurancePolicy = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Insurance policy\", 1, 0),\n    Old_NoPlans = ifelse(`E.10..How.will.you.mainly.ensure.that.you.have.money.to.meet.your.needs.when.you.are.old.and.can.no.longer.work.` == \"Donâ€™t know/Have no plans/Have not yet thought about how/where I would get the money for this purpose\", 1, 0),\n    ConfidentWithBanks = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._Banks` == \"Yes\", 1, 0),\n    ConfidentWithMFIs = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._MFIs` == \"Yes\", 1, 0),\n    ConfidentWithSACCOs = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._SACCOs` == \"Yes\", 1, 0),\n    ConfidentWithMobileMoney = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._Mobile.money.operators` == \"Yes\", 1, 0),\n    ConfidentWithPensionFund = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._Pension.fund` == \"Yes\", 1, 0),\n    ConfidentWithSavingsGroups = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._Savings.groups.CMGs` == \"Yes\", 1, 0),\n    ConfidentWithFamilyFriends = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._Family.friends` == \"Yes\", 1, 0),\n    ConfidentWithUTTs = ifelse(`F.3.2.1..I.will.read.for.you.a.list.of.institutions..and.pease.tell.me.which.you.feel.confident.with.SAVINGS.your.money.with._UTTs` == \"Yes\", 1, 0),\n    PayingBack_Yes = ifelse(`G.2.4..Have.you..in.the.past.12.months..been.paying.back.money.that.you.borrowed.` == \"Yes\", 1, 0),\n    PayingBack_No = ifelse(`G.2.4..Have.you..in.the.past.12.months..been.paying.back.money.that.you.borrowed.` == \"No\", 1, 0),\n    BorrowedFrom_Bank = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Bank` == \"Yes\", 1, 0),\n    BorrowedFrom_MFI = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Microfinance.institution.such.as` == \"Yes\", 1, 0),\n    BorrowedFrom_SACCO = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..SACCOS` == \"Yes\", 1, 0),\n    BorrowedFrom_MobileMoney = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..A.mobile.money.service.provider` == \"Yes\", 1, 0),\n    BorrowedFrom_PensionFund = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..A.pension.fund` == \"Yes\", 1, 0),\n    BorrowedFrom_Employer = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Your.employer` == \"Yes\", 1, 0),\n    BorrowedFrom_Family_PayBack = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Family.friends.that.you.had.to.pay.back` == \"Yes\", 1, 0),\n    BorrowedFrom_Family_NoPayBack = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Family.friends.that.you.did.not.have.to.pay.back` == \"Yes\", 1, 0),\n    BorrowedFrom_SavingsGroup = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Savings.group` == \"Yes\", 1, 0),\n    BorrowedFrom_CommunityLender = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Someone.in.the.community.who.lend` == \"Yes\", 1, 0),\n    BorrowedFrom_OtherSource = ifelse(`G.5.2.Did.you.borrow.money.from.the.following..Did.you.borrow.money.from.another.source` == \"Yes\", 1, 0),\n    Used_Cash = ifelse(`X2.1.In.the.past.12.months..how.often.did.you.use.the.Cash.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_ATM_DebitCard = ifelse(`X2.2.In.the.past.12.months..how.often.did.you.use.the.ATM...Debit.card.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_CreditCard = ifelse(`X2.3.In.the.past.12.months..how.often.did.you.use.the.Credit.card.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_BankTransfer = ifelse(`X2.4.In.the.past.12.months..how.often.did.you.use.the.Bank.transfer.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_MobileMoney = ifelse(`X2.5.In.the.past.12.months..how.often.did.you.use.the.Mobile.money.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_Cryptocurrency = ifelse(`X2.6.In.the.past.12.months..how.often.did.you.use.the.Cryptocurrency.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_QR_Code = ifelse(`X3.1.In.the.past.12.months..how.often.did.you.use.the.QR.code..for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_POS = ifelse(`X3.2.In.the.past.12.months..how.often.did.you.use.the.POS.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_LipaNamba = ifelse(`X3.3.In.the.past.12.months..how.often.did.you.use.the.Lipa.Namba.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Used_AZAMPay = ifelse(`X3.4.In.the.past.12.months..how.often.did.you.use.the.AZAM.Pay.for.purchases.of.goods` == \"Yes\", 1, 0),\n    Basic_TASAF_Cash_Transfer = ifelse(`X1..You.indicated.earlier.that.you.get.assistance.from.Government.or.NGO..please.tell.me.which...Basic.TASAF.cash.transfer` == \"Yes\", 1, 0),\n    Additional_Conditional_TASAF_Cash_Transfer = ifelse(`X1..You.indicated.earlier.that.you.get.assistance.from.Government.or.NGO..please.tell.me.which...Additional.Conditional.TASAF.cash.transfer` == \"Yes\", 1, 0),\n    Pension_for_Elders = ifelse(`X1..You.indicated.earlier.that.you.get.assistance.from.Government.or.NGO..please.tell.me.which...Pension.for.elders..Znz.only.` == \"Yes\", 1, 0),\n    Others_Assistance = ifelse(`X1..You.indicated.earlier.that.you.get.assistance.from.Government.or.NGO..please.tell.me.which...Others` == \"Yes\", 1, 0),\n    \n    Payment_Was_Late = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._Payment.was.late` == \"Yes\", 1, 0),\n    Gave_Money_To_Official = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._You.had.to.give.money.to.an.official` == \"Yes\", 1, 0),\n    Money_Didnt_Come = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._Money.didn.t.come.at.all` == \"Yes\", 1, 0),\n    Received_Less_Money = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._You.received.less.money.than.should.have` == \"Yes\", 1, 0),\n    Household_Not_On_Register = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._Your.household.not.on.the.register` == \"Yes\", 1, 0),\n    Unable_To_Collection_Point = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._You.were.not.able.to.go.to.the.collection.point.and.you.didn.t.get.the.payment` == \"Yes\", 1, 0),\n    No_Proof_Of_Identity = ifelse(`X2.Please.tell.me.which.of.the.following.problems.do.you.experience.with.these.payments._You.didn.t.have.proof.of.identity.and.didn.t.g.et.the.money` == \"Yes\", 1, 0),\n    Do_Not_Know_Where_To_Go = ifelse(`J1.7.Why.don.t.you.report.problems..I.do.not.know.where.to.go` == \"Yes\", 1, 0),\n    Places_Not_In_My_Area = ifelse(`J1.7.Why.don.t.you.report.problems..The.places.are.not.in.my.area` == \"Yes\", 1, 0),\n    Do_Not_Think_They_Care = ifelse(`J1.7.Why.don.t.you.report.problems..I.do.not.think.they.care.about` == \"Yes\", 1, 0),\n     Trust_Insurance_Companies = ifelse(`X1.3.Please.tell.me.which.of.the.following.you.is.true.for.you...You.trust.insurance.companies.to.pay.out.when.something.does.go.wrong` == \"True\", 1, 0),\n    Insurance_Good_Idea = ifelse(`X1.3.Please.tell.me.which.of.the.following.you.is.true.for.you...Insurance.is.a.good.idea.for.everyone` == \"True\", 1, 0),\n    Need_Insurance = ifelse(`X1.3.Please.tell.me.which.of.the.following.you.is.true.for.you...You.don.t.need.insurance.as.you.get.money.if.things.go.wrong` == \"True\", 1, 0),\n    Have_Insurance_Cover = ifelse(`X2.Do.you.have.insurance.cover.` == \"Yes\", 1, 0),\n    Motor_Vehicle_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Motor.vehicle.insurance` == \"Yes\", 1, 0),\n    Households_Contents_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Households.contents.insura` == \"Yes\", 1, 0),\n    Private_Health_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Private.health.insurance` == \"Yes\", 1, 0),\n    National_Health_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..National.health.insurance` == \"Yes\", 1, 0),\n    Community_Health_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Community.health.insurance` == \"Yes\", 1, 0),\n    TIKA_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..TIKA..Tiba.Kwa.Kadi.` == \"Yes\", 1, 0),\n    Social_Health_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Social.Health.Insurance.Be` == \"Yes\", 1, 0),\n    Personal_Accident_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Personal.accident.insuranc` == \"Yes\", 1, 0),\n    Life_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Life.insurance` == \"Yes\", 1, 0),\n    Loan_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Loan.insurance.in.case.of` == \"Yes\", 1, 0),\n    Building_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Building.insurance` == \"Yes\", 1, 0),\n    Education_Policy = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Education.policy` == \"Yes\", 1, 0),\n    Funeral_Cover = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Funeral.cover` == \"Yes\", 1, 0),\n    Agricultural_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Agricultural.insurance` == \"Yes\", 1, 0),\n    Ushirika_Afya = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Ushirika.afya` == \"Yes\", 1, 0),\n    Motorcycle_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Motorcycle.insurance` == \"Yes\", 1, 0),\n    Livestock_Insurance = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Livestock.insurance` == \"Yes\", 1, 0),\n    Other_Insurance_Products = ifelse(`X3.1.1.Please.tell.me.which.of.the.following.you.have..Any.other.insurance.produc` == \"Yes\", 1, 0),\n    Network_Failure = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Network.failure` == \"Yes\", 1, 0),\n    Agent_Absent = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Agent.absent.not.available` == \"Yes\", 1, 0),\n    Agent_No_Cash_Float = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Agent.didn.t.have.enough.cash.float` == \"Yes\", 1, 0),\n    Agent_Overcharged = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Agent.overcharged.for.transactions` == \"Yes\", 1, 0),\n    Lost_Money = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Lost.money` == \"Yes\", 1, 0),\n    Agent_Requested_PIN = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Agent.wanted.you.to.reveal.your.PIN.number` == \"Yes\", 1, 0),\n    Other_Problems = ifelse(`X10.1.In.the.past.12.months.have.you.experienced.any.of.the.following.when.you.wanted.to.use.mobile.money._Any.other.problem` == \"Yes\", 1, 0),\n    Moneylender_Access = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..You.can.use.or.access.your.moneylender.whenever.you.need.to` == \"Agree\", 1, 0),\n    Moneylender_TreatsWell = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..Your.moneylender.always.treats.you.well` == \"Agree\", 1, 0),\n    Moneylender_InfoClear = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..Before.you.took.out.a.loan.with.your.moneylender..you.got.as.much.info.as.needed.and.it.was.easy.to.understand` == \"Agree\", 1, 0),\n    Moneylender_NeedsMet = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..The.products.and.services.offered.by.your.moneylender.meets.your.financial.needs` == \"Agree\", 1, 0),\n    Moneylender_FeesReasonable = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..Your.moneylender.s.fees.and.charges.are.reasonable` == \"Agree\", 1, 0),\n    Moneylender_CustomerSupport = ifelse(`X4b.Please.tell.me.which.of.the.following.statements.you.agree.with..You.are.satisfied.with.your.moneylender.s.customer.support` == \"Agree\", 1, 0),\n    Banked = ifelse(Banked == \"Yes\", 1, 0),\n    Not_Banked = ifelse(Banked == \"No\", 1, 0),\n    MFI = ifelse(MFI == \"Yes\", 1, 0),\n    Not_MFI = ifelse(MFI == \"No\", 1, 0),\n    PENSION = ifelse(PENSION == \"Yes\", 1, 0),\n    Not_PENSION = ifelse(PENSION == \"No\", 1, 0),\n    INSURANCE = ifelse(INSURANCE == \"Yes\", 1, 0),\n    Not_INSURANCE = ifelse(INSURANCE == \"No\", 1, 0),\n    SACCO = ifelse(SACCO == \"Yes\", 1, 0),\n    Not_SACCO = ifelse(SACCO == \"No\", 1, 0),\n    CAPITALM_FUND_MANAGERS = ifelse(CAPITALM_FUND_MANAGERS == \"Yes\", 1, 0),\n    Not_CAPITALM_FUND_MANAGERS = ifelse(CAPITALM_FUND_MANAGERS == \"No\", 1, 0),\n    FORM_INVESTMENTS = ifelse(FORM_INVESTMENTS == \"Yes\", 1, 0),\n    Not_FORM_INVESTMENTS = ifelse(FORM_INVESTMENTS == \"No\", 1, 0),\n    CMG = ifelse(CMG == \"Yes\", 1, 0),\n    Not_CMG = ifelse(CMG == \"No\", 1, 0),\n    INFORMAL_MONEYLENDER = ifelse(INFORMAL_MONEYLENDER == \"Yes\", 1, 0),\n    Not_INFORMAL_MONEYLENDER = ifelse(INFORMAL_MONEYLENDER == \"No\", 1, 0),\n    SOCIAL_GROUPS = ifelse(SOCIAL_GROUPS == \"Yes\", 1, 0),\n    Not_SOCIAL_GROUPS = ifelse(SOCIAL_GROUPS == \"No\", 1, 0)\n  )\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nLastly, we will select the cleaned encoded columns as our final dataframe and replace all the missing values in encoded variables with 0. We will exclude geometry column in the process with the following code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_cleaned <- tanzania_encoded %>%\n  select(7,121, 200:529)%>%\n  mutate(across(-c(geometry), ~ ifelse(is.na(.), 0, .)))\n```\n:::\n\n\nThere is now 13 records with age 0. We will impute age with the mean of the remaining respondents.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_age <- mean(tanzania_cleaned$Age, na.rm = TRUE)\ntanzania_cleaned$Age[tanzania_cleaned$Age == 0] <- mean_age\n```\n:::\n\n\nNow, our dataframe is ready and cleaned with our chosen variables. We will save it.\n\n::: panel-tabset\n## Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(tanzania_cleaned,\"data/rds/tanzania_cleaned.rds\")\n```\n:::\n\n\n## Load\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntanzania_cleaned <- read_rds(\"data/rds/tanzania_cleaned.rds\")\n```\n:::\n\n:::\n\n# References\n\nUnited Nations Capital Development Fund (UNCDF). (2024).Â *Insights from Tanzania: Global data reveals financial inclusion for women*. Retrieved fromÂ <https://policyaccelerator.uncdf.org/whats-new/insights-tanzania-global-data-reveals-financial-inclusion-women>\n\nWorld Bank. (17 April, 2024).Â *Financial inclusion in Sub-Saharan Africa: Overview*. Retrieved fromÂ <https://www.worldbank.org/en/publication/globalfindex/brief/financial-inclusion-in-sub-saharan-africa-overview>\n\nWorld Bank. (2022).Â *Global financial inclusion: A comprehensive overview*. Retrieved fromÂ <https://documents1.worldbank.org/curated/en/099305408252329233/pdf/SECBOS1e6ff9a00041b4261bcdc9c154a7b.pdf>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}